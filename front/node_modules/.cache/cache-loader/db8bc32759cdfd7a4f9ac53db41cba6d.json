{"remainingRequest":"C:\\xampp\\htdocs\\photograph\\front\\node_modules\\babel-loader\\lib\\index.js!C:\\xampp\\htdocs\\photograph\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\photograph\\front\\src\\pages\\admin\\publishphoto.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\xampp\\htdocs\\photograph\\front\\src\\pages\\admin\\publishphoto.vue","mtime":1527093572796},{"path":"C:\\xampp\\htdocs\\photograph\\front\\package.json","mtime":1526886124924},{"path":"C:\\xampp\\htdocs\\photograph\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1526485514234},{"path":"C:\\xampp\\htdocs\\photograph\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1519636541000},{"path":"C:\\xampp\\htdocs\\photograph\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1526010763000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { publishphoto as _publishphoto, getHeader } from '@/config';\nexport default {\n  name: 'publishphoto',\n  data: function data() {\n    return {\n      photo: {\n        title: 'A title',\n        description: 'No description',\n        file: '',\n        status: ''\n      },\n      errors: '',\n      messages: ''\n    };\n  },\n  components: {},\n  methods: {\n    publishphoto: function publishphoto() {\n      var _this = this;\n\n      this.messages = false;\n      var formData = new FormData();\n      var imagefile = this.photo.file;\n      formData.append(\"image\", imagefile);\n      formData.append(\"title\", this.photo.title);\n      formData.append(\"description\", this.photo.description);\n      formData.append(\"status\", this.photo.status);\n      axios.post(_publishphoto, formData, {\n        headers: getHeader()\n      }).then(function (response) {\n        if (response.data.success) {\n          //displaying message\n          _this.messages = true; //waiting for some momment\n\n          setTimeout(function () {\n            _this.$router.push({\n              path: \"/photos/\".concat(response.data.lastId)\n            });\n          }, 1000);\n        } else {}\n      }).catch(function (err) {\n        _this.errors = err.response.data.errors;\n      });\n    }\n  },\n  created: function created() {\n    var userObj = JSON.parse(window.localStorage.getItem('authUser'));\n\n    if (userObj == null) {\n      this.$router.push({\n        path: '/login'\n      });\n    }\n  }\n};",{"version":3,"sources":["publishphoto.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;QAEA;wBACA;;;eAGA;qBACA;cACA;gBACA,AACA;AALA;cAMA;gBACA,AACA;AATA;AAUA;cAEA,AACA;;;AAEA;;sBACA;yBACA;iCACA;+BACA;0CACA;gDACA;2CACA;;iBACA;kCACA;;AAEA;2BAEA,KAHA,CAIA;;iCACA;;oDACA;;aACA;eAEA,CACA;8BACA;yCACA;AACA;AACA,AACA;AA1BA;8BA2BA;yDACA;;yBACA;;cACA;;AACA;AACA;AAjDA","file":"publishphoto.vue","sourceRoot":"src\\pages\\admin","sourcesContent":["<template>\r\n\t<div class=\"row\">\r\n\t\t<div class=\"col-md-9\">\r\n\t\t\t<b-form @submit.prevent=\"publishphoto\" enctype=\"multipart/form-data\">\r\n\t\t\t\t<b-alert variant=\"success\" v-show=\"messages\" show>Added successfully</b-alert>\r\n\t\t\t\t<b-form-group\r\n\t\t\t\t            label=\"Photo title:\"\r\n\t\t\t\t            label-for=\"title\">\r\n\t\t\t\t<b-form-input id=\"title\"\r\n\t\t\t\t              type=\"text\"\r\n\t\t\t\t              v-model=\"photo.title\"\r\n\t\t\t\t              required\r\n\t\t\t\t              placeholder=\"Photo title\">\r\n\t\t\t\t</b-form-input>\r\n\t\t\t\t</b-form-group>\r\n\t\t\t\t<b-form-group\r\n\t\t\t\t            label=\"Photo Description:\"\r\n\t\t\t\t            label-for=\"description\">\r\n\t\t\t\t\t<b-form-textarea id=\"textarea1\"\r\n\t\t\t\t\t\t\tv-model=\"photo.description\"\r\n\t\t\t\t\t\t\tplaceholder=\"Enter something\"\r\n\t\t\t\t\t\t\t:rows=\"3\"\r\n\t\t\t\t\t\t\t:max-rows=\"6\">\r\n\t\t\t\t    </b-form-textarea>\r\n\t\t\t\t</b-form-group>\r\n\t\t\t\t<b-form-group\r\n\t\t\t\t            label=\"Image:\"\r\n\t\t\t\t            label-for=\"file\">\r\n\t\t\t\t\t<b-form-file id=\"file\" v-model=\"photo.file\" placeholder=\"Choose a file...\"></b-form-file>\r\n\t\t\t\t</b-form-group>\r\n\t\t\t\t<b-form-group\r\n\t\t\t\t            label=\"Visibility:\"\r\n\t\t\t\t            label-for=\"vs\">\r\n\t\t\t\t<b-form-checkbox id=\"vs\"\r\n                     v-model=\"photo.status\"\r\n                     value=\"1\"\r\n                     unchecked-value=\"0\">Visible\r\n\t\t\t    </b-form-checkbox>\r\n\t\t\t\t</b-form-group>\r\n\t\t\t\t<div class=\"col-md-12 text-danger\" v-show=\"errors\">\r\n\t\t\t\t\t<p v-for='err in errors'>{{ err[0] }}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<b-button type=\"submit\" variant=\"outline-success\">Submit</b-button>\r\n\t\t\t\t</b-form>\r\n\t\t</div>\r\n\t\t<div class=\"col-md-3\" order-sm=\"1\">\r\n\t\t\t<label>Rules</label>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport { publishphoto, getHeader } from '@/config'\r\n\texport default{\r\n\t\tname: 'publishphoto',\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tphoto: {\r\n\t\t\t\t\ttitle: 'A title',\r\n\t\t\t\t\tdescription: 'No description',\r\n\t\t\t\t\tfile: '',\r\n\t\t\t\t\tstatus: ''\r\n\t\t\t\t},\r\n\t\t\t\terrors: '',\r\n\t\t\t\tmessages: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tpublishphoto: function(){\r\n\t\t\t\tthis.messages = false\r\n\t\t\t\tvar formData = new FormData();\r\n\t\t\t\tvar imagefile = this.photo.file;\r\n\t\t\t\tformData.append(\"image\", imagefile);\r\n\t\t\t\tformData.append(\"title\", this.photo.title);\r\n\t\t\t\tformData.append(\"description\", this.photo.description);\r\n\t\t\t\tformData.append(\"status\", this.photo.status);\r\n\t\t\t\taxios.post(publishphoto, formData, { headers: getHeader() })\r\n\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\tif(response.data.success){\r\n\t\t\t\t\t\t\t//displaying message\r\n\t\t\t\t\t\t\tthis.messages = true\r\n\r\n\t\t\t\t\t\t\t//waiting for some momment\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tthis.$router.push({ path: `/photos/${ response.data.lastId }` });\r\n\t\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\tthis.errors = err.response.data.errors;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated(){\r\n\t\t\tconst userObj = JSON.parse(window.localStorage.getItem('authUser'))\r\n\t        if(userObj == null){\r\n\t         this.$router.push({ path: '/login' })\r\n\t        }\r\n\t\t}\r\n\t}\r\n</script>"]}]}